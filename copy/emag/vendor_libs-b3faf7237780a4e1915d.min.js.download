function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}TWEEG_RUNTIME=function(){"use strict";var n={},i=null,o={};function e(){}function r(t){this.value=t}r.prototype={toString:function(){return this.value+""}};var a=Object.prototype.hasOwnProperty;function s(t){return new r(t)}function l(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function u(t,e){if("string"!=typeof t)return t;switch(e){case"html":case void 0:case null:return s(t.replace(/&/g,"&amp;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&#xa0;"));case"js":return s(t.replace(/[^a-zA-Z0-9,._]/g,function(t){t=t.charCodeAt(0);return t<=255?"\\x"+("0"+t.toString(16)).substr(-2):"\\U"+("00"+t.toString(16)).substr(-4)}));case!1:return t}throw new Error("Unknown escape strategy: "+e)}function c(t){return t instanceof String||"string"==typeof t?t+"":!0===t?"1":t instanceof r?t.value:null!=t&&!1!==t?"object"==_typeof(t)?"Array":t+"":""}function t(t){return c(t).replace(/^\s+|\s+$/g,"").replace(/>\s+</g,"><")}function h(t,e,n){return null!=n&&0<=n&&(n+=e),t.slice(e,n)}function d(t){if(""!==t&&null!=t&&!1!==t){if(Array.isArray(t))return!t.length;if("object"!=_typeof(t))return!1;for(var e in t)if(a.call(t,e))return!1}return!0}var p,f,_=Object.assign||function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(null!=n)for(var o in n)a.call(n,o)&&(t[o]=n[o])}return t},m=(p=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,f=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,function o(t){for(var e="",n=(t=t.replace(p,function(t,e,n){return o(n)+e}).replace(f,"$2$1")).length;n--;)e+=t.charAt(n);return e});function g(t,e,n){var o,i;if(n=null==n?1:n<0?-n:parseFloat(n),"string"!=typeof t||"string"!=typeof e){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e)||isNaN(n))throw new Error("Invalid range arguments");if(t<=e)for(o=t,i=[];o<=e;o+=n)i.push(o);else for(o=t,i=[];e<=o;o-=n)i.push(o)}else{if(1!=t.length||1!=e.length)throw new Error("Invalid range arguments");if((t=t.charCodeAt(0))<=(e=e.charCodeAt(0)))for(o=t,i=[];o<=e;o+=n)i.push(String.fromCharCode(o));else for(o=t,i=[];e<=o;o-=n)i.push(String.fromCharCode(o))}return i}function v(t){var i=[];return function t(e){for(var n=e.length;0<=--n;){var o=e[n];null!=o&&(Array.isArray(o)?t(o):"object"==_typeof(o)?t(Object.keys(o).map(function(t){return o[t]})):i.push(o))}}(t),i}var b={},y={t:function(t){return y.merge(new e,t)},func:{cycle:function(t,e){return t[e%t.length]},range:g,slice:h,max:function(){return Math.max.apply(Math,v(arguments))},min:function(){return Math.min.apply(Math,v(arguments))},attribute:function(t,e,n){return e=t[e],e=null!=n?e.apply(t,n):e},random:function(t){return"number"==typeof t?Math.floor(Math.random()*(t+1)):"string"==typeof t||Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:Math.floor(2147483648*Math.random())}},filter:{json_encode:function(t,e){return JSON.stringify(t,null,e)},e:function(t,e){return u(c(t),e)},escape:function(t,e){return u(c(t),e)},raw:function(t){return s(""+t)},default:function(t,e){return d(t)?e:t},join:function(t,e,n){var o,t=null==(o=t)?[]:Array.isArray(o)?o:"string"==typeof o?o.split(""):Object.keys(o).map(function(t){return o[t]});return!n||t.length<2?t.join(e):t.slice(0,-1).join(e)+n+t[t.length-1]},split:function(t,e){return c(t).split(e)},upper:function(t){return c(t).toUpperCase()},lower:function(t){return c(t).toLowerCase()},merge:function(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):_(t,e)},replace:function(t,e){t=c(t);var n=e.__tweeg_js_rx_cache__;return n||(n=new RegExp("("+Object.keys(e).map(l).join("|")+")","g"),e.__tweeg_js_rx_cache__=n),t.replace(n,function(t){return e[t]})},capitalize:function(t){return(t=c(t)).charAt(0).toUpperCase()+t.substr(1)},column:function(t,e){return t.map(function(t){return t[e]})},keys:function(t){return Object.keys(t)},batch:function(t,e,n){for(var o=[],i=0;i<t.length;i+=e){var r=t.slice(i,e);if(null!=n)for(;r.length<e;)r.push(n);o.push(r)}return o},first:function(t){if(null==t)return null;if(Array.isArray(t))return t[0];if("string"==typeof t)return t.charAt(0);for(var e in t)if(a.call(t,e))return t[e]},last:function(t){if(null==t)return null;if(Array.isArray(t))return t[t.length-1];if("string"==typeof t)return t.charAt(t.length-1);var e=Object.keys(t);return e.length?t[e.length-1]:void 0},trim:function(t,e,n){if(t=c(t),null==e&&null==n)return t.trim();null==e&&(e=" ");for(var o=0,i=t.length-1;o<=i;){var r=t.charAt(o)==e,a=t.charAt(i)==e;if(!r&&!a)break;r&&o++,a&&i--}return"left"==n?t.substr(o):"right"==n?t.substring(0,i+1):t.substring(o,i+1)},abs:Math.abs,round:function(t,e,n){return null==e&&(e=0),null==n&&(n="common"),e=Math.pow(10,e),t*=e,t="common"==n?Math.round(t):"ceil"==n?Math.ceil(t):Math.floor(t),t/=e},slice:h,sort:function(e,n){if(null==n&&(n=function(t,e){return t<e?-1:e<t?1:0}),Array.isArray(e))return e.slice().sort(n);var o={};return Object.keys(e).map(function(t){return{key:t,val:e[t]}}).sort(function(t,e){return n(t.val,e.val)}).forEach(function(t){o[t.key]=t.val}),o},filter:function(e,n){if(Array.isArray(e))return e.filter(n);var o={};return Object.keys(e).map(function(t){return{key:t,val:e[t]}}).filter(function(t){return n(t.val,t.key)}).forEach(function(t){o[t.key]=t.val}),o},map:function(e,n){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return n(e[t],t)})},reduce:function(e,t,n){return null==n&&(n=0),(Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t]})).reduce(t,n)},length:function(t){return null==t?0:(Array.isArray(t)?t:"object"==_typeof(t)?Object.keys(t):c(t)).length},url_encode:function(e){var t="string"==typeof e?encodeURIComponent(e):Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");return new r(t)},striptags:function(t,e){return t=c(t),(e=e&&e.split(/[<>]+/).filter(function(t){return 0<t.length}).map(function(t){return"/?"+t}).join("|"))?(e=new RegExp("<(?!(?:"+e+")).*?>","ig"),s(t.replace(e,""))):s(t.replace(/<.*?>/g,""))},reverse:function(e,n){if(Array.isArray(e))return e.slice().reverse();if(""===e||null==e||!1===e)return"";if("string"==typeof(e="number"==typeof e?String(e):e))return m(e);var o={},i=0;return Object.keys(e).reverse().forEach(function(t){!n&&t==parseFloat(t)?o[i++]=e[t]:o[t]=e[t]}),o},spaceless:t},operator:{matches:function(t,e){var n=/^\/(.*)\/([igmsy])?$/.exec(e);if(n)try{return new RegExp(n[1],n[2]).exec(t)}catch(t){}throw new Error("Invalid regular expression: "+e)},"starts with":function(t,e){return t=c(t),e=c(e),t.substr(0,e.length)==e},"ends with":function(t,e){return t=c(t),e=c(e),t.lastIndexOf(e)+e.length==t.length},"..":g,in:function(t,e){return null!=e&&(Array.isArray(e)||"string"==typeof e?0<=e.indexOf(t):a.call(e,t))}},bool:function(t){return Array.isArray(t)?!!t.length:"0"!==t&&(t instanceof r?!!t.value:!!t)},number:function(t){return"number"==typeof t?t:(t=parseFloat(t),isNaN(t)?0:t)},hash:function(t){for(var e=0,n={};e<t.length;)n[t[e++]]=t[e++];return n},out:function(t){for(var e="",n=0;n<t.length;++n)e+=c(t[n]);return s(e)},for:function(e,n){null==e&&(e=[]);var t=Array.isArray(e),o=t?null:Object.keys(e),i=(o||e).length,r={index:1,index0:0,revindex:i,revindex0:i-1,length:i,first:!0},a=[];function s(t,e){r.last=!r.revindex0;t=n(r,t,e);t!==y&&(a.push(t),r.first=!1,++r.index,++r.index0,--r.revindex,--r.revindex0)}return t?e.forEach(s):o.forEach(function(t){s(e[t],t)}),a.length||a.push(n()),y.out(a)},empty:d,iterable:function(t){return null!=t&&"object"==_typeof(t)},slice:h,escape:u,escape_html:function(t){return u(t,"html")},escape_js:function(t){return u(t,"js")},string:c,spaceless:t,merge:_,include:function(t,e,n){if(!Array.isArray(t))return y.exec(t,e,n);for(var o=0;o<t.length;++o){var i=y.exec(t[o],!0,e);if(null!=i)return i}if(!n)throw new Error("Could not find any of the templates: "+JSON.stringify(t))},register:function(t,e){t=t.replace(/^\/*/,""),(e=n[t]=e()).$name=t},get:function(t){return t instanceof e?t:(t=(t=i?y.resolve(i.$name,t):t).replace(/^\/*/,""),n[t])},with:function(t,e,n){var o=y.get(t);if(!o){if(n)return null;throw new Error("Could not find template "+t)}n=i;try{return e(i=o)}finally{i=n}},exec:function(t,e,n){return y.with(t,function(t){return""+t.$main(e||{})},n)},add_path:function(t,e){o[t]=e},resolve:function(e,t){return t=t.replace(/@[a-z0-9_]+/gi,function(t){return o[t.substr(1)]}),/^\//.test(t)?t.substr(1):/^@/.test(t)?t:((e=e.split(/\/+/)).pop(),t.split(/\/+/).forEach(function(t){t&&"."!=t&&(".."==t?e.pop():e.push(t))}),e.join("/"))},index:function(t,e){return null==t?null:t[e]},add_global:function(t,e){b[t]=e},is_global:function(t){return a.call(b,t)},global:function(t){return b[t]}};return y},!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lozad=e()}(this,function(){"use strict";var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},r="undefined"!=typeof document&&document.documentMode,h={rootMargin:"0px",threshold:0,load:function(t){var e;if("picture"===t.nodeName.toLowerCase()&&(e=document.createElement("img"),r&&t.getAttribute("data-iesrc")&&(e.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(e.alt=t.getAttribute("data-alt")),t.appendChild(e)),"video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var n,o=t.children,i=0;i<=o.length-1;i++)(n=o[i].getAttribute("data-src"))&&(o[i].src=n);t.load()}t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset")),t.getAttribute("data-background-image")&&(t.style.backgroundImage="url('"+t.getAttribute("data-background-image")+"')"),t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function d(t){t.setAttribute("data-loaded",!0)}function p(t){return"true"===t.getAttribute("data-loaded")}return function(){var n,o,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",t=c({},h,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),r=t.root,e=t.rootMargin,a=t.threshold,s=t.load,l=t.loaded,u=void 0;return{observe:function(){for(var t=function(t,e){e=1<arguments.length&&void 0!==e?e:document;return t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t)}(i,r),e=0;e<t.length;e++)p(t[e])||(u?u.observe(t[e]):(s(t[e]),d(t[e]),l(t[e])))},triggerLoad:function(t){p(t)||(s(t),d(t),l(t))},observer:u=window.IntersectionObserver?new IntersectionObserver((n=s,o=l,function(t,e){t.forEach(function(t){(0<t.intersectionRatio||t.isIntersecting)&&(e.unobserve(t.target),p(t.target)||(n(t.target),d(t.target),o(t.target)))})}),{root:r,rootMargin:e,threshold:a}):u}}});var PH=function(){"use strict";e=!1,t=navigator.userAgent||navigator.vendor||window.opera;var t,e,n=e=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))||e;return{isMobileDevice:function(){return n},isArray:function(t){return Array.isArray(t)},isElement:function(t){return t instanceof HTMLElement},now:Date.now||function(){return(new Date).getTime()},throttle:function(n,o,i){function r(){c=!1===i.leading?0:PH.now(),u=null,l=n.apply(a,s),u||(a=s=null)}var a,s,l,u=null,c=0;i=i||{};return function(){var t=PH.now(),e=(c||!1!==i.leading||(c=t),o-(t-c));return a=this,s=arguments,e<=0||o<e?(u&&(clearTimeout(u),u=null),c=t,l=n.apply(a,s),u||(a=s=null)):u||!1===i.trailing||(u=setTimeout(r,e)),l}},debounce:function(e,n,o){function i(){var t=PH.now()-l;t<n&&0<=t?r=setTimeout(i,n-t):(r=null,o||(u=e.apply(s,a),r||(s=a=null)))}var r,a,s,l,u;return function(){s=this,a=arguments,l=PH.now();var t=o&&!r;return r=r||setTimeout(i,n),t&&(u=e.apply(s,a),s=a=null),u}},nl2br:function(t){return t.replace(/(?:\r\n|\r|\n)/g,"<br>")},camelToDashes:function(t){return t.replace(/([a-z]?)([A-Z])/g,function(t,e,n){return e+"-"+n.toLowerCase()})},dashesToCamel:function(t){return t.replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()})},objectHasKey:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},noop:function(){},identity:function(t){return t},slice:function(t,e,n){n=n||[];for(var o=e||0;o<t.length;++o)n.push(t[o]);return n},findNext:function(t,e,n){if(0<=e&&e<t.length)for(;++e<t.length;)if(n(t[e],e))return e;return null},findPrev:function(t,e,n){if(0<=e&&e<t.length)for(;0<=--e;)if(n(t[e],e))return e;return null},nextIndex:function(t,e,n){for(var o=0,i=t.length;o<i;++o)if(e(t[o],o))return o<i-1?o+1:n?0:null},prevIndex:function(t,e,n){for(var o=0,i=t.length;o<i;++o)if(e(t[o],o))return 0<o?o-1:n?i-1:null},variableArgsMethod:function(s,l){return function n(){for(var o=PH.slice(arguments),t=0;t<l.length;++t){var i=l[t];if(i>=o.length)break;var r=o[i];if(PH.isArray(r))return r.map(e,this);if("object"==_typeof(r)&&!PH.isElement(r))return Object.keys(r).map(a,this)}return s.apply(this,o);function e(t){var e=o.slice();return e[i]=t,n.apply(this,e)}function a(t){var e=o.slice();return e.splice(i,1,t,r[t]),n.apply(this,e)}}},animate:function(e,t){var n=(t=t||{}).fps||60,o=t.steps||20,i=0,r=setTimeout(function t(){e(i/o,i,o),i<o?(r=setTimeout(t,1e3/n),i++):a()},1e3/n);function a(){clearTimeout(r),t.onStop&&t.onStop(i/o)}return{stop:a}},merge:Object.assign||function(e){var n;function t(t){e[t]=n[t]}null==e&&(e={});for(var o=0;o<arguments.length;++o)null!=(n=arguments[o])&&Object.keys(n).forEach(t);return e},htmlEscape:function(t){return t.replace(/&/g,"&amp;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&#xa0;")},cancellable:function(n,o,i){var r;function a(){(i?clearInterval:clearTimeout)(r),r=null}function s(){var t,e;return i&&r||(t=this,e=PH.slice(arguments),a(),r=(i?setInterval:setTimeout)(function(){n.apply(t,e)},o)),s}return s.cancel=a,s},sort:function(t,u){return function t(e){if(e.length<=1)return e;for(var n=Math.floor(e.length/2),o=t(e.slice(0,n)),i=t(e.slice(n)),r=[],a=0,s=0,l=0;a<o.length&&s<i.length;)u(o[a],i[s])<=0?r[l++]=o[a++]:r[l++]=i[s++];return a<o.length?r.concat(o.slice(a)):s<i.length?r.concat(i.slice(s)):r}(t)},partition:function(t,n){var o=Object.create(null);return t.forEach(function(t){var e=n(t);(o[e]||(o[e]=[])).push(t)}),o}}}();PH.perfnow=window.performance&&window.performance.now?function(){return performance.now()}:PH.now,!function(d){"use strict";HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(i,r,a){var s=this;setTimeout(function(){for(var t=atob(s.toDataURL(r,a).split(",")[1]),e=t.length,n=new Uint8Array(e),o=0;o<e;o++)n[o]=t.charCodeAt(o);i(new Blob([n],{type:r||"image/png"}))})}});var e,t,n,o=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),this)};function i(){return t=t||d.createDOM("div",{className:"ph-full-screen-overlay",style:{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",zIndex:31e3}})}function r(t){return window.getComputedStyle(t)}function a(t,e,n){for(var o=0;o<t.length;++o)e.call(n,t[o],o)}d.merge(d,{element:function(t){return t="string"==typeof t?document.querySelector(t):t},hasClass:function(t,e){for(var n=e.split(/\s+/),o=n.length;0<=--o;)if(!t.classList.contains(n[o]))return!1;return!0},addClass:function(e,n){if(d.isArray(e))return a(e,function(t){t&&d.addClass(t,n)});n.split(/\s+/).forEach(function(t){e.classList.add(t)})},removeClass:function(e,n){if(d.isArray(e))return a(e,function(t){t&&d.removeClass(t,n)});n instanceof RegExp?e.className=e.className.replace(n," ").trim().replace(/  +/g," "):n.split(/\s+/).forEach(function(t){e.classList.remove(t)})},toggleClass:function(t,e,n){(n=null==n?!d.hasClass(t,e):n)?d.addClass(t,e):d.removeClass(t,e)},condClass:function(t,e,n,o){d.toggleClass(t,n,e),o&&d.toggleClass(t,o,!e)},createDOM:function(t,n){var o;if(d.isElement(t))return t;if(d.isArray(t)){var e=1;if("*text"==t[0])o=document.createTextNode(t[1]);else if("*html"==t[0])o=d.node(t[1]);else for(d.isArray(t[0])?(o=document.createDocumentFragment(),e=0):(n=t[1],o=d.createDOM(t[0],"object"==_typeof(n)?(++e,n):null));e<t.length;){var i=t[e++];null!=i&&o.appendChild(d.createDOM(i))}return o}return"string"==typeof t?(o=document.createElement(t),null!=n&&Object.keys(n).forEach(function(t){var e;"style"==t?(e=n[t],Object.keys(e).forEach(function(t){o.style[t]=e[t]})):o[t]=n[t]}),o):void 0},target:function(t){return void 0!==t.target?t.target:t.srcElement},closest:function(t,e){if(t.closest)return t.closest(e);for(;t;){if(d.matches(t,e))return t;t=t.parentNode}},closestWithStyle:function(t,e){var n=Object.keys(e),o=document.documentElement;t:for(;t&&t!==o;){for(var i=d.getComputedStyle(t),r=n.length;0<=--r;){var a=n[r];if(i[a]!=e[a]){t=t.parentNode;continue t}}return t}},matches:function(t,e){return!(!t||t===document||!e)&&o.call(t,e)},remove:function(t){return t&&t.parentNode&&t.parentNode.removeChild(t)},isVisible:function(t){return 0<t.clientWidth||0<t.clientHeight},isHidden:function(t){return!d.isVisible(t)},node:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),1<e.childNodes.length?((t=document.createRange()).selectNodeContents(e),t.extractContents()):e.firstChild},setPos:function(t,e){t.style.left=e.x+"px",t.style.top=e.y+"px"},getBox:function(t){return t.getBoundingClientRect()},getAbsBox:function(t){var t=t.getBoundingClientRect(),e=d.getViewport();return{left:t.left+e.left,top:t.top+e.top,right:t.right+e.left,bottom:t.bottom+e.top,width:t.width,height:t.height}},getViewportLeft:function(){return window.pageXOffset},getViewportTop:function(){return window.pageYOffset},getViewport:function(){var t=d.getViewportLeft(),e=d.getViewportTop(),n=window.innerWidth,o=window.innerHeight;return{left:t,top:e,width:n,height:o,bottom:e+o,right:t+n}},getFixedViewport:function(){var t=window.innerWidth,e=window.innerHeight;return{left:0,top:0,width:t,height:e,right:t,bottom:e}},getScrollableParent:function(t){for(var e=t.parentNode;e&&e!==document.body&&"auto"!=r(e).overflow;)e=e.parentNode;return e},scrollIntoView:function(t){var e,n=d.getScrollableParent(t);n&&(e=d.getBox(n),(t=d.getBox(t)).top<e.top?n.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(n.scrollTop+=t.bottom-e.bottom),t.left<e.left?n.scrollLeft-=e.left-t.left:t.right>e.right&&(n.scrollLeft+=t.right-e.right))},getData:function(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+d.camelToDashes(e))},setData:function(t,e,n){t.dataset?null==n?delete t.dataset[e]:t.dataset[e]=n:null==n?t.removeAttribute("data-"+d.camelToDashes(e)):t.setAttribute("data-"+d.camelToDashes(e),n)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},on:d.variableArgsMethod(function(t,e,n,o){d.isArray(t)?t.forEach(function(t){d.on(t,e,n,o)}):t.addEventListener(e,n,o||!1)},[1,2]),off:d.variableArgsMethod(function(t,e,n,o){d.isArray(t)?t.forEach(function(t){d.off(t,e,n,o)}):t.removeEventListener(e,n,o||!1)},[1,2]),getComputedStyle:r,stopEvent:function(t){t.preventDefault(),t.stopPropagation()},getScrollbarSize:function(){var t;return e||(t=d.createDOM(["div",{style:{width:"50px",height:"50px",overflow:"auto",position:"absolute",left:"-10000px",top:"-10000px"}},["div",{style:{width:"100px",height:"100px"}}]]),document.body.appendChild(t),e={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight},document.body.removeChild(t)),e},scrollTo:function(t,e){window.scroll({top:t,left:window.pageXOffset,behavior:"smooth"})},scrollToElement:function(t,e){if((e=e||{}).offsetTop=e.offsetTop||0,!t)return!1;t=t.getBoundingClientRect();d.scrollTo(d.getViewportTop()+t.top+e.offsetTop,e)},wrap:function(t,e){var n=document.createRange();return n.selectNode(t),n.surroundContents(e),e},trigger:function(t,e,n){var o=document.createEvent("HTMLEvents");o.initEvent(e,!0,!0),o.data=n,t.dispatchEvent(o)},live:function(n,t,o,i,r,e){d.on(n,t,function(t){var e=d.target(t);if(!o)return i.call(r||e,t,n);for(;e;){if(e.nodeType!==document.DOCUMENT_FRAGMENT_NODE&&d.matches(e,o))return e.disabled?null:i.call(r||e,t,e);if(e===n)return;e=e.parentNode}},!!e)},visibility:function(t,e){var t=t.getBoundingClientRect(),n=((e=d.merge({page:0,element:0,elementRelative:0,elementAbsolute:0},e)).elementRelative?e.element=t.height*e.elementRelative:e.elementAbsolute&&(e.element=e.elementAbsolute),e.page);return n instanceof Function&&(n=n()),t.top<n&&t.bottom>n?"passed":t.top+e.element<window.innerHeight&&t.bottom>n?"in-view":t.bottom<n?"above":t.top+e.element>=window.innerHeight?"below":void 0},overlay:(n=!1,{on:function(){return d.isMobileDevice()||n||(document.body.appendChild(i()),n=!0),this},off:function(){return d.isMobileDevice()||n&&(d.remove(i()),n=!1),this},cursor:function(t){return d.isMobileDevice()||(i().style.cursor=t),this}}),html:function(t){for(var e=document.createDocumentFragment(),n=(e.appendChild(d.node(t)),e.querySelectorAll("[data-name]")),o={$all:e},i=0;i<n.length;++i){var r=n[i];(o[r.getAttribute("data-name")]=r).removeAttribute("data-name")}return o},setTransition:function(t,e){t=t.style;t.transition=t.webkitTransition=t.msTransition=e,/^transform/.test(e)&&(t.webkitTransition="-webkit-"+e)},getTransform:function(t){t=d.getComputedStyle(t);return null!=t.webkitTransform?t.webkitTransform:null!=t.msTransform?t.msTransform:t.transform},getTransformMatrix:function(t){t=/^matrix\(\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*\)$/i.exec(d.getTransform(t));if(t)return[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6])]},setTransform:function(t,e){t=t.style;t.transform=t.webkitTransform=t.msTransform=e},elementSize:function(t){(t=t.cloneNode(!0)).style.position="absolute",t.style.left="-10000px",document.body.appendChild(t);var e={width:t.offsetWidth,height:t.offsetHeight};return document.body.removeChild(t),e},dragging:function(n){n=d.merge({klass:"ph-dragging",container:null,element:null,handle:null,start:d.noop,stop:d.noop,move:d.noop,esc:d.noop,threshold:null,thresholdX:null,thresholdY:null,timers:[],block:!0,cursor:"default",focus:null,overlay:!0},n);var o,i,r,a={mousemove:function(t){d.stopEvent(t),n.move(h(t))},touchmove:function(t){e(t)&&n.move(h(t))},mouseup:function(t){e(t)&&d.stopEvent(t);c(h(t))},touchend:function(t){e(t)&&d.stopEvent(t);c(h(t))},keydown:function(t){27==t.keyCode&&n.esc(t)}};function e(t){t=h(t);return null!==n.thresholdY?Math.abs(t.dy)>=n.thresholdY:null!==n.thresholdX?Math.abs(t.dx)>=n.thresholdX:null===n.threshold||t.dx*t.dx+t.dy*t.dy>=n.threshold*n.threshold}var s,l,u=n.timers;function c(t){clearTimeout(l),d.removeClass(o,n.klass),d.overlay.off(),d.off(window,a,!0),n.stop(t)}function h(t){var e=t;return{clientX:(e=t.touches&&t.touches[0]?t.touches[0]:e).clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,dx:e.clientX-i,dy:e.clientY-r,target:e.target}}function t(t,e){"mousedown"==t.type&&0!=t.button||(n.block&&d.stopEvent(t),n.container?(o=e,n.handle&&(o=d.closest(o,n.element))):o=n.element,n.focus&&n.focus.focus(),d.addClass(o,n.klass),n.overlay&&d.overlay.on().cursor(n.cursor),d.on(window,a,!0),t=h(t),i=t.clientX,r=t.clientY,n.start(h(t),o),s=0,function n(){{var o;s<u.length&&function t(e){l=setTimeout(function(){null==e||0<e?(o.handler(),t(null==e?null:e-1)):0===e&&n()},o.timeout)}((o=u[s++]).count)}}())}return n.container?d.live(n.container,["touchstart","mousedown"],n.handle||n.element,t):d.on(n.element,["touchstart","mousedown"],t),c}})}(window.PH),!function(){"use strict";function n(i,r,a){return a=a||{},Object.keys(r).forEach(function(t){var e,n=r[t],o=t,o=(PH.isArray(n)&&(o=n[0],e=n[2],n=n[1]),PH.objectHasKey(a,o)?a[o]:PH.objectHasKey(a,t)?a[t]:n);e&&"function"===e.type&&"string"==typeof o&&(o=(0,eval)(o)),i[t]=o}),i}PH.setDefaults=n,PH.defclass=function(t,e,n){var o="'use strict'; function "+t+"() { ",o=(e&&(o=o+(t+".beforeBase.apply(this, arguments); ")+"base.apply(this, arguments); "),o=(o=(o+=t+".init.apply(this, arguments); ")+"} "+(t+".prototype = Object.create(base.prototype); "))+(t+".prototype.constructor = "+t+"; ")+("return "+t+"; "),new Function("base",o)(e)),t=(o.base=e.prototype,o.objectName=t,n(o,o.prototype)||o);return e&&!o.beforeBase&&(o.beforeBase=PH.noop),o.init||(o.init=PH.noop),o.prototype.finishDef&&o.prototype.finishDef(),t};var o=PH.variableArgsMethod,i=(PH.Object=PH.defclass("PH_Object",Object,function(t,e){t.init=function(t){this.options&&(this.args&&(t=PH.merge({},this.args,t)),n(this,this.options,t))},e.finishDef=function(){var t=this.constructor;t.options&&(this.options=PH.merge({},t.base.options,t.options)),t.args&&(this.args=PH.merge({},t.base.args,t.args))}}),PH.defclass("EventProxy",PH.Object,function(t,e){t.options={_init_handlers:["eventHandlers",null]},t.init=function(){this._events={};var e=this._init_handlers;e&&Object.keys(e).forEach(function(t){this.on(t,e[t])},this)},e.on=o(function(t,e){(this._events[t]||(this._events[t]=[])).push(e)},[0,1]),e.off=o(function(t,e){var n=this._events[t];n&&((n=n.filter(function(t){return t!==e})).length?this._events[t]=n:delete this._events[t])},[0,1]),e.once=o(function(e,n){this.on(e,function t(){return this.off(e,t),n.apply(this,arguments)})},[0,1]),e.trigger=function(t){var e=this._events[t];if(e)for(var n=0;n<e.length;++n)e[n].apply(this,PH.slice(arguments,1))},e.withoutHooks=function(t,e){Array.isArray(t)||(t=[t]);var n={};t.forEach(function(t){n[t]=this._events[t],delete this._events[t]},this);try{return e()}finally{PH.merge(this._events,n)}}})),t=(i.global=new i,PH.defclass("Widget",i,function(t,e){t.options={_tagName:["tagName","div"],_from:["from",null],_replace:["replace",!1],_className:["className",null],_focusable:["focusable",null],_disabled:["disabled",!1],_parent:["parent",null],_on_init:["onInit",null,{type:"function"}]},t.init=function(t){this._initElement(),this._disabled&&this.disable(!0);var e=this._on_init;e&&e.call(this,this),this._destroyed||i.global.trigger("NewWidget",this,this.constructor.objectName)},e._ph_className=[],e._createElement=function(){var t=document.createElement(this._tagName),e=this._ph_className.join(" ");return this._className&&(e+=" "+this._className),t.className=e,t},e._initElement=function(){var t,e;!0===this._focusable&&(this._focusable=0),this._from&&(this._from=PH.element(this._from),null==(this._from.PH_Widget=this)._focusable&&/^(?:select|input|textarea)$/i.test(this._from.tagName)&&(this._focusable=0),this._replace?(t=this._createElement(),this._from.className&&(t.className+=" "+this._from.className),this._from.parentNode.insertBefore(t,this._from),this._from.style.display="none"):(t=this._from,e=this._ph_className.join(" "),t.className&&(e+=" "+t.className),this._className&&(e+=" "+this._className),t.className=e)),t=t||this._createElement(),((this._element=t).PH_Widget=this)._from&&this._from.disabled&&this.disable(!0),0<=t.tabIndex&&null==this._focusable&&(this._focusable=t.tabIndex),null!=this._focusable&&(t.tabIndex=this._focusable,PH.on(t,{keydown:this._proxyDomEvent("keydown"),keypress:this._proxyDomEvent("keypress"),focus:this._proxyDomEvent("focus"),blur:this._proxyDomEvent("blur")})),PH.on(t,{mouseenter:this._proxyDomEvent("mouseenter"),mouseleave:this._proxyDomEvent("mouseleave"),mousemove:this._proxyDomEvent("mousemove")}),this._parent&&this._parent.addChild(this)},e._proxyDomEvent=function(e){return function(t){this.trigger(e,t)}.bind(this)},e.addChild=function(t){this.contentElement().appendChild(t.element())},e.contentElement=function(){return this.element()},e.finishDef=function(){t.base.finishDef.apply(this,arguments),(this._ph_className=this._ph_className.slice()).push("ph"+PH.camelToDashes(this.constructor.objectName))},e.element=function(){return this._element},e.focus=function(){this._element.focus()},e.blur=function(){this._element.blur()},e.addClass=function(t){PH.addClass(this._element,t)},e.delClass=function(t){PH.removeClass(this._element,t)},e.hasClass=function(t){return PH.hasClass(this._element,t)},e.toggleClass=function(t,e){PH.toggleClass(this._element,t,e)},e.disable=function(t){null==t&&(t=!0),this._element&&(this._element.disabled=t,this.toggleClass("ph-disabled",t)),this._disabled=t,this.trigger("disable",t)},e.enable=function(t){this.disable(null!=t&&t)},e.disabled=function(){return this._disabled},e.destroy=function(){var t;this._destroyed||(this.trigger("destroy"),this._destroyed=!0,(t=this._element)&&t!==this._from&&t.parentNode&&t.parentNode.removeChild(t),t&&(t.PH_Widget=null,this._element=null))},e.setPos=function(t){PH.setPos(this.element(),t)},e.getPos=function(){var t=this.element();return{x:t.offsetLeft,y:t.offsetTop}},e.getBox=function(){return PH.getBox(this.element())},e.setSize=function(t){var e=this.element();e.style.width=t.width+"px",e.style.height=t.height+"px"},e.relayout=function(){}})),a=(PH.Widget=t,PH.EventProxy=i,{true:!0,false:!1,null:null});t.autoInit=function(t){t=PH.element(t||document.body),PH.slice(t.querySelectorAll("[data-phino]")).forEach(function(t){if(!t.PH_Widget){for(var e=t.getAttribute("data-phino"),n={from:t},o=0;o<t.attributes.length;++o){var i=t.attributes[o],r=i.nodeName,i=i.nodeValue,r=/^data-ph-(.*)$/.exec(r);","==i.charAt(0)?i=JSON.parse(i.substr(1)):PH.objectHasKey(a,i)?i=a[i]:/^[0-9.]+$/.test(i)&&parseFloat(i)==i&&(i=parseFloat(i)),r&&(n[PH.dashesToCamel(r[1])]=i)}new PH[e](n)}})}}(),!function(){"use strict";var n=[["Su","Mo","Tu","We","Th","Fr","Sa"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]],o=[["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],e={GoToday:"Go today"};PH.t=function(t){return e[t]},PH.t.calMon=function(t,e){return o[+e][t]},PH.t.calDay=function(t,e){return n[+e][t]},PH.t.messages=e}(),PH.scrollSpy=function(e,n,o){o=PH.setDefaults({},{throttle:0,offsets:{}},o);var i=window.pageYOffset,t=o.throttle,r={start:l,stop:function(){PH.off(window,["scroll","resize"],s)}};function a(){var t=window.pageYOffset;n(PH.visibility(e,o.offsets),t-i,r),i=t}var s=a;function l(){PH.on(window,["scroll","resize"],s)}return t&&(s=PH.throttle(a,t,{leading:!1})),a(),l(),r},!function(n){"use strict";PH.ScrollMonitor=PH.defclass("ScrollMonitor",PH.Widget,function(t,e){t.options={_throttle:["throttle",0],_target:["target",null],_class:["class",null],_downClass:["downClass",null],_upClass:["upClass",null],_offset:["offset",0]},e._initElement=function(){var o,i,r=this,t=PH.element(r._from),a=PH.element(r._target||t);a&&(i=o=null,r.spy=PH.scrollSpy(r._from,function(t,e){var n=/^(?:above|passed)$/.test(t);PH.isHidden(a)?(r._class&&PH.removeClass(a,r._class),!1!==o&&r.trigger("toggle",o=!1)):n&&0<=e?(r._class&&PH.addClass(a,r._class),!0!==o&&r.trigger("toggle",o=!0)):!n&&e<0&&(r._class&&PH.removeClass(a,r._class),!1!==o&&r.trigger("toggle",o=!1)),t!==i&&r.trigger("status",i=t,e),n?(5<e&&(r._upClass&&PH.removeClass(a,r._upClass),r._downClass&&PH.addClass(a,r._downClass)),e<-5&&(r._downClass&&PH.removeClass(a,r._downClass),r._upClass&&PH.addClass(a,r._upClass))):(r._upClass&&PH.removeClass(a,r._upClass),r._downClass&&PH.removeClass(a,r._downClass))},{throttle:r._throttle,offsets:{page:r._offset}}))},e.stop=function(){this.spy.stop()},e.start=function(){this.spy.start()}}),PH.ScrollNavbar=PH.defclass("ScrollNavbar",PH.Widget,function(t,e){t.options={_animationSteps:["animationSteps",20]},e._initElement=function(){var i=this;(i._from.PH_Widget=i).refresh(),n.pushState&&PH.live(this._from,"click","a[href]",function(t,e){e=e.href.replace(/^.*#/,"");PH.scrollToElement(document.getElementById(e),{steps:i._animationSteps}),PH.stopEvent(t)}),PH.on(window,["scroll","resize"],PH.throttle(function(){var t=i.links,e=function(t){for(var e=0;e<t.length;++e){var n=t[e],o=n.href.replace(/^.*#/,""),o=document.getElementById(o);if(o){o=o.getBoundingClientRect();if(o.top>.2*window.innerHeight)return t[e-1];if(0<=o.top)return n}}return t[t.length-1]}(t);e&&(PH.addClass(PH.closest(e,"li"),"active"),i.trigger("scroll-navbar-active",e));for(var n=0;n<t.length;++n){var o=t[n];o!==e&&PH.removeClass(PH.closest(o,"li"),"active")}},100,{leading:!1}))},e.refresh=function(){this.links=PH.slice(this._from.querySelectorAll("a[href]"))}})}(window.history),PH.Carousel=PH.defclass("Carousel",PH.Widget,function(t,e){"use strict";var g=["touchstart","mousedown"];function v(t){return(null!=t.screenX?t:t.touches[0]).screenX}function b(t){return(null!=t.screenY?t:t.touches[0]).screenY}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].left>=e)return n}function i(t,e,n){var o=t.offsetLeft;return"center"==n?o+=t.offsetWidth/2:"right"==n&&(o+=t.offsetWidth),Math.abs(o-e)}function r(t){PH.slice(t.querySelectorAll("img[data-src]")).forEach(function(t){t.src=PH.getData(t,"src"),t.removeAttribute("data-src")})}t.options={_arrows:["arrows",!0],_dots:["dots",!0],_drag:["drag",!0],_snap:["snap",null],_circular:["circular",!1],_loop:["loop",!1],_handleResize:["handleResize",!1],_autoScroll:["autoScroll",null],_noMobile:["disableOnMobile",!1],_lazyLoadImgs:["lazyLoadImgs",null],_classNext:["classNext",""],_classPrev:["classPrev",""]},e._initElement=function(){var o=this,n=(t.base._initElement.apply(o,arguments),o._circular&&(o._dots=!1),o.addClass("ph-at-begin ph-at-end"),document.createDocumentFragment()),i=o._cards=[];PH.slice(o._element.children).forEach(function(t,e){"SCRIPT"!=t.tagName&&(PH.addClass(t,"ph-card"),t.ph_index=e,i.push(t),n.appendChild(t))}),PH.empty(o._element),i.length?(o._scroller=PH.createDOM(["div",{className:"ph-scroller"},["div",{className:"ph-body"}]]),o._element.appendChild(o._scroller),o._body=o._scroller.firstChild,o._body.appendChild(n),o._lazyLoadImgs&&o.on("move",function(e,n){n=n||o._getBounds(),o._cards.filter(function(t){return t.offsetLeft+t.offsetWidth>=e&&t.offsetLeft<=e+n.width}).forEach(r)}),o._noMobile&&PH.isMobileDevice()?(o._mobileDisabled=!0,o.addClass("ph-native-scroll"),o._dots&&(o.addClass("ph-has-dots"),o._setupDots()),PH.on(o._scroller,"scroll",function(){var t=o._scroller.scrollLeft;o.trigger("move",t),o._dots&&o._refresh(t)}),o.trigger("move",0)):(o._drag&&o._setupDrag(),o._arrows&&(o.addClass("ph-has-arrows"),o._setupArrows()),o._dots&&(o.addClass("ph-has-dots"),o._setupDots()),o.setPosition(o._getBounds().min),o._handleResize&&(o._onResize=o._onResize.bind(o),PH.on(window,"resize",o._onResize),o.on("destroy",function(){PH.off(window,"resize",o._onResize)})),o._setupAutoScroll(),o.on({mouseenter:function(){o._disableAutoScroll()},mouseleave:function(){o._dragging||o._setupAutoScroll()}}))):o.destroy()},e._onResize=function(){this.relayout();var t=this._getCurrentCard();this._gotoCard(t.card)},e._setupAutoScroll=function(){var n=this;n._autoScroll&&(clearTimeout(n._autoScrollTimer),function e(){n._autoScrollTimer=setTimeout(function(){var t=n._getBounds(),t=t.current==t.max?t.min:n._getNextPagePos();n._animate(t,"0.4s"),e()},n._autoScroll)}())},e._disableAutoScroll=function(t){this._autoScroll&&(clearTimeout(this._autoScrollTimer),t&&setTimeout(this._setupAutoScroll.bind(this),t))},e.reloadCards=function(){var n=this._cards=[];PH.slice(this._body.children).forEach(function(t,e){"SCRIPT"!=t.tagName&&(PH.addClass(t,"ph-card"),t.ph_index=e,n.push(t))}),this.relayout(),this.trigger("reload")},e.contentElement=function(){return this._body},e.getCards=function(){return this._cards},e._getCurrentCard=function(n){var o=this,t=o._getBounds();switch(n=null==n?t.current:n,o._snap){case"center":n+=t.width/2;break;case"right":n+=t.width}return{card:o._cards.slice().sort(function(t,e){return i(t,n,o._snap)-i(e,n,o._snap)})[0],pos:n}},e._getNextPagePos=function(){var t=this._computePages(),e=this._getBounds(),n=o(t,e.current);return n<t.length-1?Math.min(e.max,t[n+1].left):e.max},e._getPrevPagePos=function(){var t=this._computePages(),e=this._getBounds(),n=o(t,e.current);return 0<n?Math.max(e.min,t[n-1].left):e.min},e.next=function(){var t,e=this._getNextPagePos();(this._loop||this._circular)&&(t=this._getBounds(),this._loop?e==t.current&&(e=t.min):this._circular&&Math.abs(e-t.current)<t.width/2&&(this._rotateCards(this._computePages().pageSize),e=this._getNextPagePos())),this._doSnapAnimate(e,"0.4s"),this._disableAutoScroll(1e4)},e.prev=function(){var t,e=this._getPrevPagePos();this._circular&&(t=this._getBounds(),Math.abs(e-t.current)<t.width/2&&(this._rotateCards(-this._computePages().pageSize),e=this._getPrevPagePos())),this._doSnapAnimate(e,"0.4s"),this._disableAutoScroll(1e4)},e._setupArrows=function(){var e=this,t=PH.createDOM([["a",{className:("ph-left-margin "+e._classPrev).trim(),href:"#"}],["a",{className:("ph-right-margin "+e._classNext).trim(),href:"#"}]]);function n(t){PH.stopEvent(t),e.prev()}function o(t){PH.stopEvent(t),e.next()}e._leftArrow=t.firstChild,e._rightArrow=e._leftArrow.nextSibling,e._element.appendChild(t),PH.on(e._leftArrow,g,n),PH.on(e._rightArrow,g,o),PH.on(e._leftArrow,"click",PH.stopEvent),PH.on(e._rightArrow,"click",PH.stopEvent),e.on("keydown",function(t){37==t.keyCode?n(t):39==t.keyCode&&o(t)})},e._setupDots=function(){var t=this._dots=PH.createDOM("div",{className:"ph-dots"});this._element.appendChild(t),this.resetDots(0)},e.resetDots=function(t){var e,i=this;i._dots&&(PH.empty(i._dots),e=document.createDocumentFragment(),i._pages=i._computePages(),i._pages.forEach(function(o){var t=PH.createDOM(["a",{className:"ph-dot"}]);o.dot=t,e.appendChild(t),PH.on(t,g,function(t){var e=i._getBounds(),n=Math.min(o.left,e.max);n=Math.max(n,e.min),i._doSnapAnimate(n,"0.5s"),PH.stopEvent(t),i._disableAutoScroll(1e4)})}),i._dots.appendChild(e)),i._refresh(t)},e.relayout=function(){this.resetDots(),this.trigger("refresh")},e._refresh=function(t){var n,o,i,e=this._getBounds();if(null==t&&(t=e.current),this.toggleClass("ph-at-begin",t<=e.min),this.toggleClass("ph-at-end",t>=e.max),e.max>e.min&&((this._loop||this._circular)&&this.delClass("ph-at-end"),this._circular&&this.delClass("ph-at-begin")),this.trigger("move",t,e),this._dots){for(var r=this._pages,a=t,s=t+e.width,l=(n=function(t,e){var n=0;return t.left>=a&&t.right<=s?n=t.right-t.left:t.left>=a&&t.left<=s?n=s-t.left:t.right>=a&&t.right<=s&&(n=t.right-a),-(n/=t.right-t.left)},i=o=null,r.forEach(function(t,e){t=n(t,e);(null==o||t<o)&&(i=e,o=t)}),i),u=0;u<r.length;++u){var c=r[u];PH.toggleClass(c.dot,"ph-active",u==l),u==l&&10<r.length&&this._scrollDots(c.dot)}this.trigger("dot-change",l,r[l])}return e},e._scrollDots=function(t){var e=this,n=e._dots.scrollLeft,o=t.offsetLeft-e._dots.offsetWidth/2;PH.animate(function(t){e._dots.scrollLeft=(t=1-(t=1-(t=t))*t,n+t*(o-n))})},e._rotateCards=function(t){var e,n=this._getBounds().current,o=0;if(0<t)for(;0<t--;)o+=(e=this._cards.shift()).offsetWidth,this._body.appendChild(e),this._cards.push(e);else for(;t++<0;)o-=(e=this._cards.pop()).offsetWidth,this._body.insertBefore(e,this._body.firstChild),this._cards.unshift(e);return this.setPosition(n-o),o},e._computePages=function(){for(var t=this._getBounds(),e=this._cards,n=0,o=[],i=0,r=0;r<e.length;++r){var a=e[r];a.offsetLeft+a.offsetWidth>n&&(n=Math.min(t.contentWidth,a.offsetLeft+t.width),o.push({card:a,left:a.offsetLeft,right:n}),i=i||r)}return o.pageSize=i,o},e._setupDrag=function(){var o,i,r,a,s,l,u,c,h,d,p,f=this,_=PH.isMobileDevice()?{touchmove:t,touchend:m}:{mousemove:t,mouseup:m};function t(t){if(20<Math.abs(r-b(t))&&!d)return m();s=a-v(t),a=v(t);var e=o+i-v(t),n=(10<Math.abs(e-o)&&(PH.overlay.on(),d=!0),d&&PH.stopEvent(t),!1),t=(h<=c?e=o+.1*(i-v(t)):e<c?(f._circular&&(o-=f._rotateCards(-1),n=!0),e=c-.1*(c-e)):h<e&&(f._circular&&(o-=f._rotateCards(1),n=!0),e=h+.1*(e-h)),n||(f.setPosition(e),f.trigger("dragging",e)),PH.perfnow());u=t-l,l=PH.perfnow()}function m(t){PH.off(document,_,{passive:!1});var e=f._position(),n=s/u*70;isNaN(n)||(e=e+n,e=Math.min(h,Math.max(e,c)),p?f._alignCard(e):f._doSnapAnimate(e,"0.4s"),s=0,PH.overlay.off(),f._dragging=!1,f._disableAutoScroll(1e4))}PH.on(f._element,"dragstart",PH.stopEvent,!0),PH.on(f._element,g,function(t){"mousedown"==t.type&&PH.stopEvent(t);var e=f._getBounds();p=e.contentWidth<e.width,o=e.current,a=i=v(t),r=b(t),c=e.min,h=e.max,PH.on(document,_,{passive:!1}),d=!1,f._dragging=!0,f._disableAutoScroll()})},e._getBounds=function(){var t=this._position(),e=0,n=this._cards[0],o=this._cards[this._cards.length-1],i=o.offsetLeft+o.offsetWidth-n.offsetLeft,r=this._scroller.offsetWidth,a=i-r-1;return"center"==this._snap&&(e-=(r-n.offsetWidth)/2,a+=(r-o.offsetWidth)/2),{min:e,max:a,current:t,width:r,contentWidth:i}},e._position=function(){return this._mobileDisabled?this._scroller.scrollLeft:this._offset||0},e.setPosition=function(t){this._mobileDisabled?this._scroller.scrollLeft=t:(PH.setTransition(this._body,"none"),PH.setTransform(this._body,"translate3d("+-t+"px, 0, 0)")),this._offset=t,this._refresh(t)},e._animate=function(t,e){this._mobileDisabled?this._scroller.scrollLeft=t:(PH.setTransition(this._body,"transform "+e),PH.setTransform(this._body,"translate3d("+-t+"px, 0, 0)")),this._offset=t,this._refresh(t)},e._gotoNextCard=function(){var t=(t=this._getCurrentCard().card).nextSibling||t;this._gotoCard(t)},e._gotoPrevCard=function(){var t=(t=this._getCurrentCard().card).previousSibling||t;this._gotoCard(t)},e._gotoCard=function(t,e,n){null==n&&(n="0.2s");var o=this._getBounds(),i=t.offsetLeft;switch(e||this._snap){case"center":i-=o.width/2-t.offsetWidth/2;break;case"right":i-=o.width-t.offsetWidth}i=Math.max(Math.min(i,o.max),o.min),this._animate(i,n)},e._doSnapAnimate=function(t,e){this._snap?this._alignCard(t):this._animate(t,e||"0.2s")},e.bringCardInView=function(t){var e=t.getBoundingClientRect(),n=this._scroller.getBoundingClientRect();e.left<n.left?this._gotoCard(t,"left"):e.right>n.right&&this._gotoCard(t,"right")},e._alignCard=function(t){t=this._getCurrentCard(t);this._gotoCard(t.card)},PH.Widget.prototype.relayoutCarousels=function(t){PH.slice((t||this._element).querySelectorAll(".ph-carousel")).forEach(function(t){t=t.PH_Widget;t&&t.relayout()})}}),PH.Popup=PH.defclass("Popup",PH.Widget,function(t,e){"use strict";t.options={_content:["content",null],_anchor:["anchor",null],_type:["type","menu"],_align:["align","SW NW"],_scrollClose:["scrollClose",200],_permanent:["permanent",!1],_rescale:["rescale",!1]},e._initElement=function(){t.base._initElement.apply(this,arguments),this._element.appendChild(this._content),this._on_docMouseDown=this._on_docMouseDown.bind(this),this._scrollClose&&(this._on_docScroll=PH.throttle(this._on_docScroll.bind(this),100,{leading:!1,trailing:!0}),this.on("destroy",this.hide.bind(this))),this._permanent&&this.addClass("ph-permanent")},e.show=function(t){if(this._timerHide&&this._timerHide.cancel(),!this._visible){var e={};if(this.trigger("beforeShow",e),e.cancel)return}if(this._anchor&&!/^(?:in-view|passed)$/.test(PH.visibility(this._anchor)))return PH.isMobileDevice()?void 0:this.hide();var n,e=this._fixedCont=this._anchor&&PH.closestWithStyle(this._anchor,{position:"fixed"}),o=e?PH.getBox(this._element):PH.getAbsBox(this._element),i=(!this._rescale||(i=PH.getTransformMatrix(this._element))&&(o=PH.merge({},o,{width:o.width/i[0],height:o.height/i[3]})),function(t){for(var e,n=t.wanted,o=t.box,i=t.fixed?PH.getFixedViewport():PH.getViewport(),r=0;r<n.length&&((e=n[r]).y<0||e.y+o.height>i.bottom||e.x<0||e.x+o.width>i.right);++r);e.y<0&&(e.y=0);e.x<0&&(e.x=0);return e}({wanted:this._anchor?(this.toggleClass("ph-fixed",!!e),n=e?PH.getBox(this._anchor):PH.getAbsBox(this._anchor),this._align.split(" ").map(function(t){switch(t.toUpperCase()){case"NW":return{x:n.left,y:n.top-o.height,c:"ph-popup-n ph-popup-w ph-popup-top"};case"N":return{x:n.left+(n.width-o.width)/2,y:n.top-o.height,c:"ph-popup-n ph-popup-top"};case"NE":return{x:n.right-o.width,y:n.top-o.height,c:"ph-popup-n ph-popup-e ph-popup-top"};case"=NW":return{x:n.left,y:n.top,c:"ph-popup-n ph-popup-w ph-popup-top"};case"=N":return{x:n.left+(n.width-o.width)/2,y:n.top,c:"ph-popup-n ph-popup-top"};case"=NE":return{x:n.right-o.width,y:n.top,c:"ph-popup-n ph-popup-e ph-popup-top"};case"SW":return{x:n.left,y:n.bottom,c:"ph-popup-s ph-popup-w ph-popup-bottom"};case"S":return{x:n.left+(n.width-o.width)/2,y:n.bottom,c:"ph-popup-s ph-popup-bottom"};case"SE":return{x:n.right-o.width,y:n.bottom,c:"ph-popup-s ph-popup-e ph-popup-bottom"};case"=SW":return{x:n.left,y:n.bottom-o.height,c:"ph-popup-s ph-popup-w ph-popup-bottom"};case"=S":return{x:n.left+(n.width-o.width)/2,y:n.bottom-o.height,c:"ph-popup-s ph-popup-bottom"};case"=SE":return{x:n.right-o.width,y:n.bottom-o.height,c:"ph-popup-s ph-popup-e ph-popup-bottom"};case"W":return{x:n.left-o.width,y:n.top-(o.height-n.height)/2,c:"ph-popup-w ph-popup-left"};case"WN":return{x:n.left-o.width,y:n.top,c:"ph-popup-w ph-popup-n ph-popup-left"};case"WS":return{x:n.left-o.width,y:n.top+n.height-o.height,c:"ph-popup-w ph-popup-s ph-popup-left"};case"E":return{x:n.right,y:n.top-(o.height-n.height)/2,c:"ph-popup-e ph-popup-right"};case"EN":return{x:n.right,y:n.top,c:"ph-popup-e ph-popup-n ph-popup-right"};case"ES":return{x:n.right,y:n.top+n.height-o.height,c:"ph-popup-e ph-popup-s ph-popup-right"}}})):[t],box:o,fixed:!!e}));PH.setPos(this._element,{x:i.x,y:i.y}),this.delClass(/ph-popup-(?:[nesw]|left|right|top|bottom)/g),this.addClass("ph-visible"),i.c&&this.addClass(i.c),"menu"==this._type&&setTimeout(function(){PH.on(document,["mousedown","touchstart"],this._on_docMouseDown)}.bind(this)),this._visible||(this._focusable&&this._element.focus(),this._visible=!0,this._scrollClose&&(this._scrollStart=PH.getViewportTop(),PH.on(window,"scroll",this._on_docScroll)),this.trigger("show"))},e.hide=function(){this._visible&&(this._visible=!1,this.delClass("ph-visible"),PH.off(document,["mousedown","touchstart"],this._on_docMouseDown),this._scrollClose&&PH.off(window,"scroll",this._on_docScroll),this.trigger("hide"),this._timerHide&&this._timerHide.cancel(),this._timerHide=PH.cancellable(function(){this._element&&PH.setPos(this._element,{x:-1e4,y:-1e4})}.bind(this),100)())},e.visible=function(){return!!this._visible},e.reposition=e.show,e.toggle=function(t){this._visible?this.hide():this.show(t)},e.setContent=function(t){PH.empty(this._element),this._content=t,this._element.appendChild(t),this.visible()&&this.reposition()},e.setAlign=function(t){this._align=t,this.visible()&&this.reposition()},e._on_docMouseDown=function(t){if(!this._permanent){for(var e=t.target;e&&e!==this._element&&e!==this._anchor;)e=e.parentNode;e||(this.hide(),t.stopPropagation())}},e._on_docScroll=function(){var t,e;this._fixedCont&&this._permanent&&this._anchor&&"in-view"==PH.visibility(this._anchor)||(t=PH.getViewport(),(Math.abs(t.top-this._scrollStart)>this._scrollClose||this._anchor&&((e=this._anchor.getBoundingClientRect()).top<0||e.bottom>t.height))&&this.hide())}}),PH.Dropdown=PH.defclass("Dropdown",PH.Widget,function(e,t){"use strict";var u=null;e.options={_trigger:["trigger",null],_openOn:["openOn","hover"],_stopEvent:["stopEvent",!0],_position:["position",null],_align:["align","SE SW"],_content:["content",null],_target:["target",null],_scrollClose:["scrollClose",400],_permanent:["permanent",!1]},t._initElement=function(){function n(t,e){PH.on(i,t,e),l.push([t,e])}var o=this,t=o._openOn,e=o._align,i=o._trigger||o._from,r=("string"==typeof i&&(i=document.querySelector(i)),o._trigger=i,o._trigger.PH_Widget||(o._trigger.PH_Widget=o),null!=o._position&&(e=function(t){switch(t=t.trim().toLowerCase().split(/\s+/).join(" ")){case"top left":return"NW NE SW SE";case"top center":return"N S";case"top right":return"NE NW SE SW";case"middle left":return"W E";case"middle right":return"E W";case"bottom left":return"SW SE NW NE";case"bottom center":return"S N";case"bottom right":return"SE SW NE NW";case"left":return"W";case"left top":return"WN";case"left bottom":return"WS";case"right":return"E";case"right top":return"EN";case"right bottom":return"ES"}}(o._position)||e),o._makeContent(o._content)),a=o._popup=new PH.Popup({className:o._className,content:r,type:"menu",anchor:i,align:e,scrollClose:o._scrollClose,permanent:o._permanent}),s=PH.cancellable(function(){a.hide()},500),l=(a.addClass("ph-dropdown-popup"),[]);(t=PH.isArray(t)?t:t.split(/\s*,\s*/)).forEach(function t(e){"hover-or-click"==e?PH.isMobileDevice()?(o._stopEvent=!0,t("click")):t("hover"):"hover"==e?PH.isMobileDevice()||(n("mouseenter",function(t){o.disabled()||(PH.stopEvent(t),s.cancel(),a.show())}),o._permanent||(n("mouseleave",s),a.on({mouseleave:s}))):e&&n(e,function(t){o.disabled()||(o._stopEvent&&PH.stopEvent(t),o._permanent?a.show():a.toggle())})}),o.on("destroy",function(){a.destroy(),l.forEach(function(t){PH.off(i,t[0],t[1])})}),o._on_windowResize=o._on_windowResize.bind(o),a.on({beforeShow:function(t){this.element().parentNode||document.body.appendChild(this.element()),o.trigger("beforeShow",t)},show:function(){o._permanent||(u&&u!==o&&u.close(),u=o),PH.on(window,"resize",o._on_windowResize),s.cancel(),o.trigger("show")},hide:function(){PH.off(window,"resize",o._on_windowResize),s.cancel(),o.trigger("hide")},mouseenter:s.cancel})},t._on_windowResize=function(){this._popup.reposition()},t.disable=function(t){e.base.disable.apply(this,arguments),t&&this.close()},t.open=function(){this._popup.show()},t.close=function(){this._popup.hide()},t.toggle=function(){this._popup.toggle()},t.setContent=function(t){this._popup.setContent(this._makeContent(t))},t.setAlign=function(t){this._popup.setAlign(t)},t._makeContent=function(t){var e;return"string"==typeof(t=null==t&&"SCRIPT"==(t=this._target?document.querySelector(this._target):this._trigger.nextElementSibling).tagName?t.innerHTML:t)&&((e=document.createElement("div")).innerHTML=t,t=e),PH.addClass(t,"ph-dropdown-inner"),t}}),PH.Select=PH.defclass("Select",PH.Widget,function(s,t){"use strict";function l(t,e,n){for(var o=[],i=0;i<t.children.length;++i){var r,a,s=t.children[i];"OPTGROUP"==s.tagName?((r=l.call(this,s,s.label,n)).unshift({label:s.label,disabled:s.disabled}),o.push(r)):"OPTION"==s.tagName&&(r=s.hasAttribute("value")?s.value:s.textContent,a=null!=s.getAttribute("selected"),o.push({label:this._htmlLabels?s.innerHTML:s.textContent,value:r,disabled:s.disabled,group:e,selected:a,className:s.getAttribute("class"),optionEl:s}),a&&n.indexOf(r)<0&&n.push(r))}return o}function u(t){return null==t?[]:PH.isArray(t)?t.slice().sort():[t]}s.options={_search:["search",!1],_replace:["replace",!0],_searchFold:["searchFold","s,t,a,i,S,T,A,I"],_searchPrefix:["searchPrefix",!1],_searchEmptyValue:["searchEmptyValue",null],_searchInfoText:["searchInfoText",null],_optionTagName:["optionTagName","a"],_data:["data",null],_value:["value",null],_labelFunc:["labelFunc",null,{type:"function"}],_optionFunc:["optionFunc",null,{type:"function"}],_emptyLabel:["emptyLabel","Select..."],_multi:["multi",!1],_flat:["flat",!1],_htmlLabels:["htmlLabels",!1],_align:["align","SW NW SE NE"],_scrollClose:["scrollClose",PH.isMobileDevice()?0:200]},t._initElement=function(){var t,e,o,i,n=this,r=(s.base._initElement.call(n),n._from&&n._from.multiple&&(this._multi=n._from.multiple,this.addClass("ph-select-multiple")),n._optionsContainer=document.createElement("div")),a=(r.className="ph-select-options",n._multi&&PH.addClass(r,"ph-select-multiple"),n._search&&((t=document.createElement("div")).className="ph-search-container",r.appendChild(t),(e=n._input=document.createElement("input")).className="ph-search",a={input:n._on_searchInput.bind(n),keydown:n._on_searchKeyDown.bind(n),keypress:function(t){t.stopPropagation()}},/MSIE |Trident\//.test(navigator.userAgent)&&(delete a.input,a.keydown=n._on_searchKeyDown_IE.bind(n)),PH.on(e,a),t.appendChild(e),"string"==typeof n._search&&(e.placeholder=n._search),n._searchFold&&(n._searchFold=("string"==typeof(o=n._searchFold)&&(o=o.split(/\s*,\s*/g)),i=o.map(function(t){return new RegExp("["+t.substr(1)+"]","g")}),function(n){return i.forEach(function(t,e){n=n.replace(t,o[e].charAt(0))}),n})),n._searchInfoText&&(n._searchInfoText=PH.node("<div class='ph-info-text'>"+n._searchInfoText+"</div>"))),n._body=document.createElement("div"));a.className="ph-body",r.appendChild(a),n._flat?(n.addClass("ph-flat"),n._element.appendChild(r),n._active=!0):(n._popup=new PH.Popup({className:n._className,content:r,type:"menu",anchor:n._element,focusable:!0,align:n._align,scrollClose:n._scrollClose}),PH.elementSize(n._popup.element()),document.body.appendChild(n._popup._element),n.on({destroy:function(){n._popup.destroy()}}),n._on_windowResize=n._on_windowResize.bind(n),n._popup.on({beforeShow:function(){n._search&&(n._input.value="",n._filterList()),n._resetPopupWidth()},show:function(){n._data.length&&(n._active=!0,n.addClass("ph-active"),n._updateSelected(),n._prevValue=u(n._value),PH.on(window,"resize",n._on_windowResize),n._input&&!PH.isMobileDevice()&&setTimeout(function(){n._input.focus()}),n._from&&PH.trigger(n._from,"ph-show"))},hide:function(){n._active=!1,n.delClass("ph-active"),n._triggerChange(),n.focus(),PH.off(window,"resize",n._on_windowResize),n._from&&PH.trigger(n._from,"ph-close")},keydown:n._handleKeyDown.bind(n),keypress:n._handleKeyPress.bind(n)}),n._label=document.createElement(this._optionTagName),n._label.className="ph-label",n._element.appendChild(n._label),PH.on(n._element,"mousedown",function(t){n.disabled()||n._popup.toggle()})),n.on({keydown:n._handleKeyDown.bind(n),keypress:n._handleKeyPress.bind(n),disable:function(){n._popup&&n._popup.hide()}}),n._multi&&(PH.on(r,"mouseenter",n._removeHighlight.bind(n)),n.on("blur",n._removeHighlight.bind(n))),n.reset(n._data)},t._removeHighlight=function(){this._highlighted=null,PH.slice(this._optionsContainer.querySelectorAll(".ph-selected")).forEach(function(t){PH.removeClass(t,"ph-selected")})},t._resetPopupWidth=function(){this._popup._element.style.width=this._element.offsetWidth+"px"},t._on_windowResize=function(t){this._popup.reposition(),this._resetPopupWidth()},t.reset=function(t){t?this._data=t:(t=this._data=l.call(this,this._from,null,this._value=[]),this.disable(!!this._from.disabled)),this._createOptions(),this._body.scrollTop=0},t._createOptions=function(){var t,a=this,s=(a._groupsByLabel={},a._options=[]);PH.empty(a._body),function o(t,i,r){t.forEach(function(t){var e,n;PH.isArray(t)?(e=t[0],(n=document.createElement("div")).className="ph-group",i.appendChild(n),a._addOption(e,n,"group-label"),(a._groupsByLabel[e.label]=e).container=n,e.length=t.length-1,o(t.slice(1),n,e.disabled)):(r&&(t.disabled=!0),t.index=s.length,s.push(t),t.element=a._addOption(t,i,"option"))})}(a._data,a._body,!1),a._highlighted=null,a._multi||(t=a.optionByValue(a.value()))&&(a._highlighted=t.index),a._data.length&&a._updateLabel()},t._handleKeyDown=function(t){if(!this.disabled())switch(t.keyCode){case 38:this.selectPrev(),PH.stopEvent(t);break;case 40:this.selectNext(),PH.stopEvent(t);break;case 13:var e,n;this._multi&&this._active?(e=this._options[this._highlighted])&&(e.checkbox.checked=!e.checkbox.checked,n=this.value().filter(function(t){return t!==e.value}),e.checkbox.checked&&n.push(e.value),this.select(n,!0)):this._popup&&this._popup.toggle(),PH.stopEvent(t);break;case 27:null!=this._prevValue&&this.select(this._prevValue,!0),this._active&&(this._popup&&this._popup.hide(),PH.stopEvent(t))}},t._handleKeyPress=function(t){var e,n,o,i=this;function r(t){t=i.optionByValue(t);return o.test(t.label)}i.disabled()||i._multi||(t=String.fromCharCode(t.keyCode||t.which),n=(e=i._values()).indexOf(i.value()),o=new RegExp("^"+t.toLowerCase(),"i"),null!=(t=null==(t=PH.findNext(e,n,r))?PH.findNext(e,0,r):t)&&i.select(e[t],!0))},t._values=function(){return this._options.map(function(t){return t.value})},t.selectNext=function(){return this._moveSelection(1)},t.selectPrev=function(){return this._moveSelection(-1)},t._moveSelection=function(t){var e,n,o=this,i=o._highlighted,r=(null==i&&(i=t<0?o._options.length:-1),o._options.filter(function(t){return!(t.disabled||t.filtered)}));if(t<0){for(e=r.length;0<=--e&&!((n=r[e]).index<i););e<0&&(n=r[r.length-1])}else{for(e=0;e<r.length&&!((n=r[e]).index>i);++e);e==r.length&&(n=r[0])}n&&(this._highlighted=n.index,o._multi||o.select(n.value,!0),o._updateSelected())},t.forEachOption=function(e){this._options.forEach(function(t){e.call(this,t.value,t)},this)},t.forEachGroup=function(e){Object.keys(this._groupsByLabel).forEach(function(t){e.call(this,t,this._groupsByLabel[t])},this)},t._updateSelected=function(){var n,o,i=this;i._active&&(n=i.value(),i.forEachOption(function(t,e){(i._multi&&e.index==i._highlighted||e.value===n)&&(o=e),PH.toggleClass(e.element,"ph-selected",e===o),i._multi&&(e.checkbox.checked=0<=n.indexOf(t))}),o&&PH.scrollIntoView(o.element))},t._addOption=function(t,e,n){n=this._makeOption(t,n);return t.className&&PH.addClass(n,t.className),e.appendChild(n),n},t._makeOption=function(t,e){var n,o,i,r=this;return"option"==e&&r._multi?(o="ph-option"+(t.disabled?" ph-disabled":""),i=this.value(),o=(n=PH.html("<label data-name='label' class='"+o+"'><input data-name='input' type='checkbox'"+(t.disabled?" disabled":"")+(i.indexOf(t.value)<0?"":" checked")+" /><i></i>"+(r._htmlLabels?r._makeOptionLabel(t):PH.htmlEscape(r._makeOptionLabel(t)))+"</label>")).label,t.checkbox=n.input,PH.on(n.input,"click",function(){t.optionEl&&PH.trigger(t.optionEl,"click",t),t.disabled||r.toggleCheckbox(t.value,n.input.checked)})):(o=document.createElement(r._optionTagName),i="ph-"+e,t.disabled&&(i+=" ph-disabled"),o.className=i,r._htmlLabels?o.innerHTML=r._makeOptionLabel(t):o.textContent=r._makeOptionLabel(t),"option"==e&&PH.on(o,"click",function(){t.optionEl&&PH.trigger(t.optionEl,"click",t),t.disabled||r.select(t.value)})),o},t._makeOptionLabel=function(t){return this._optionFunc?this._optionFunc(t):t.label},t._on_searchInput=function(t){this.trigger("search",this._input.value),this._filterList(this._input.value)},t._on_searchKeyDown=function(t){if(27==t.keyCode&&this._input.value)return this._input.value="",this._filterList(null),this._removeHighlight(),PH.stopEvent(t),!0},t._on_searchKeyDown_IE=function(t){this._on_searchKeyDown(t)||setTimeout(this._on_searchInput.bind(this),5)},t.toggleCheckbox=function(e,t){var n=!1,o=this.value().filter(function(t){return t!==e||!(n=!0)});(t=null==t?!n:t)&&o.push(e),this.select(o)},t._searchMatches=function(t,e){t=t.trim(),e=e.trim(),this._searchFold&&(t=this._searchFold(t),e=this._searchFold(e));e=e.toLowerCase().indexOf(t);return this._searchPrefix?0===e:0<=e},t._filterList=function(o){null!=(o=o||null)&&(o=o.toLowerCase());var i={},r=null,a=!1;this.forEachOption(function(t,e){var n=null==o||this._searchMatches(o,e.label);n&&(a=!0),e.element.style.display=n?"":"none",e.filtered=!n,null!=this._searchEmptyValue&&e.value==this._searchEmptyValue&&(r=e),e.group&&(i[e.group]=i[e.group]||0,e.filtered&&++i[e.group])}),!a&&r&&(r.element.style.display="",r.filtered=!1),this._searchInfoText&&(a?PH.remove(this._searchInfoText):this._body.appendChild(this._searchInfoText)),this.forEachGroup(function(t,e){null==o?e.container.style.display="":(t=i[t]==e.length,e.container.style.display=t?"none":"")}),this._active&&(this._popup&&this._popup.reposition(),this._body.scrollTop=0)},t._updateLabel=function(){var t;this._label&&(this._labelFunc?(t=this._labelFunc(this.value(),this),this._htmlLabels?this._label.innerHTML=t:this._label.textContent=t):this._multi?(t=this.value().map(function(t){return this.optionByValue(t).label},this).join(", ")||this._emptyLabel,this._label.textContent=t):(t=this.optionByValue(this.value()),this._label.textContent=t?t.label:this._emptyLabel))},t.optionByValue=function(t){for(var e=0;e<this._options.length;++e){var n=this._options[e];if(n.value==t)return n}},t.select=function(t,e,n){"number"==typeof this._multi&&PH.isArray(t)&&(t=t.slice(-this._multi)),this._prevValue=u(this._value),e||this._popup&&this._popup.hide(),this._value=u(t),this._updateLabel(),this._updateSelected(),this._from&&(this._multi||(this._from.value=t),PH.slice(this._from.options).forEach(function(t,e){(t.selected=0<=this._value.indexOf(t.value))&&!this._multi&&(this._highlighted=e)},this)),n||this._triggerChange()},t.selectByLabel=function(n,t,e){var o=[];n=n.toLowerCase(),this.forEachOption(function(t,e){this._searchMatches(n,e.label)&&o.push(t)}),this.select(o,t,e)},t._hasChanged=function(){var t=u(this._value),e=this._prevValue;if(!e||t.length!=e.length)return!0;for(var n=0;n<t.length;++n)if(t[n]!=e[n])return!0;return!1},t._triggerChange=function(){!this._hasChanged()||this._active&&!this._flat||(this._from&&PH.trigger(this._from,"change"),this.trigger("change",this._value,this._prevValue)),this._prevValue=null},t.value=function(){var t=u(this._value);return this._multi?t:t[0]}}),PH.Calendar=PH.defclass("Calendar",PH.Widget,function(u,t){"use strict";u.options={_value:["value",null],_date:["date",null],_fdow:["fdow",1],_minDate:["min",null],_maxDate:["max",null],_showMenu:["showMenu",!0],_highlightDates:["highlightDates",null,{type:"function"}],__disableDates:["disableDates",null,{type:"function"}]};var c=["<div class='ph-head'>","<div class='ph-controls'>","<a class='ph-left' data-name='left'></a>","<a class='ph-title' data-name='title'></a>","<a class='ph-right' data-name='right'></a>","</div>","<div class='ph-daynames' data-name='daynames'></div>","</div>","<div class='ph-animcont' data-name='animcont'>","<div class='ph-body' data-name='body'></div>","</div>"].join("");function r(t){var e=t.date;return t.date=1,(t=d(t)).date=Math.min(e,o(t.year,t.month)),t}function s(t){return PH.t.calMon(t.month,1)+" "+t.year}function l(n,o){for(var i=new Date,t=o._fdow,r=o._value,a=d({year:n.year,month:n.month,date:1}),t=(a.day-t)%7,e=(t<0&&(t+=7),a.date-=t,a=p(a),""),s=0;s<6;++s){e+="<div class='ph-calrow'>";for(var l=0;l<7;++l,++a)e+=function(t){var e="<a class='ph-day";t.day%6||(e+=" ph-weekend");t.month==i.getMonth()&&t.year==i.getFullYear()&&(e+=" ph-tomonth",t.date==i.getDate()&&(e+=" ph-today"));t.month==n.month&&(e+=" ph-curmonth",t.date==n.date&&(e+=" ph-selecting"));a==r&&(e+=" ph-selected");o._disableDates(t,a)&&(e+=" ph-disabled");o._highlightDates&&(e+=" "+o._highlightDates(t,a));return e=(e+="' data-ph-date='"+a+"'>")+"<span>"+t.date+"</span></a>"}(f(a));e+="</div>"}return e}function h(t){if("string"==typeof t){switch(t){case"today":t=new Date;break;case"yesterday":(t=new Date).setDate(t.getDate()-1);break;case"tomorrow":(t=new Date).setDate(t.getDate()+1);break;default:var e=/^\s*(today|yesterday|tomorrow)\s*([+-])\s*(\d+)\s*(?:d|days)?$/.exec(t);if(e)return h(e[1])+("+"==e[2]?+e[3]:-e[3])}var n=function(t){if(t=/^(\d{4})-(\d{1,2})-(\d{1,2})$/.exec(t))return{year:parseInt(t[1],10),month:parseInt(t[2],10)-1,date:parseInt(t[3],10)}}(t);if(n)return p(n)}return t="number"!=typeof(t=(t=null==t?new Date:t)instanceof Date?p({year:t.getFullYear(),month:t.getMonth(),date:t.getDate()}):t)?p(t):t}function d(t){return f(p(t))}t._initElement=function(){var n,o=this,i=(u.base._initElement.call(o),null!=o._minDate&&(o._minDate=h(o._minDate)),null!=o._maxDate&&(o._maxDate=h(o._maxDate)),o.element()),t=PH.html(c);function e(){o._move(0,1,0,!0)}function r(){o._move(0,-1,0,!0)}function a(){n&&(n.body.style.transform="scale(0)",n.body.style.opacity="0",setTimeout(function(){n.body.style.display="none"},200))}function s(){var t=parseInt(n.year.value,10);return isNaN(t)?o._getDate().year:t}function l(){return n||(n=PH.html(["<div class='ph-calendar-menu' data-name='body'>","<a class='ph-close-btn' data-name='close'></a>","<a class='ph-today' data-name='today'>",PH.t("GoToday"),"</a>","<div class='ph-calendar-menu-layout'>","<div class='ph-year'>","<a class='ph-prev' data-name='prevYear'></a>","<input type='text' data-name='year' />","<a class='ph-next' data-name='nextYear'></a>","</div>","<div class='ph-months' data-name='months'>","<a data-month='0'>"+PH.t.calMon(0,0)+"</a>","<a data-month='1'>"+PH.t.calMon(1,0)+"</a>","<a data-month='2'>"+PH.t.calMon(2,0)+"</a>","<a data-month='3'>"+PH.t.calMon(3,0)+"</a>","<a data-month='4'>"+PH.t.calMon(4,0)+"</a>","<a data-month='5'>"+PH.t.calMon(5,0)+"</a>","<a data-month='6'>"+PH.t.calMon(6,0)+"</a>","<a data-month='7'>"+PH.t.calMon(7,0)+"</a>","<a data-month='8'>"+PH.t.calMon(8,0)+"</a>","<a data-month='9'>"+PH.t.calMon(9,0)+"</a>","<a data-month='10'>"+PH.t.calMon(10,0)+"</a>","<a data-month='11'>"+PH.t.calMon(11,0)+"</a>","</div>","</div>","</div>"].join("")),i.appendChild(n.$all),PH.on(n.close,"click",function(){o._gotoYear(s(),!0),a()}),PH.on(n.today,"click",function(){o._gotoDate(new Date,!0),o.select(new Date),a()}),PH.live(n.months,"click","a[data-month]",function(t,e){var n=s()!=o._getDate().year;o._gotoYear(s(),n),o._gotoMonth(parseInt(PH.getData(e,"month"),10),!n),a()}),PH.on(n.year,{wheel:function(t){t.preventDefault();var e=s();0<t.deltaY?--e:t.deltaY<0&&++e,n.year.value=e}}),PH.dragging({focus:o,element:n.prevYear,start:t,timers:[{timeout:500,handler:t,count:0},{timeout:100,handler:t,count:10},{timeout:50,handler:t}]}),PH.dragging({focus:o,element:n.nextYear,start:e,timers:[{timeout:500,handler:e,count:0},{timeout:100,handler:e,count:10},{timeout:50,handler:e}]})),n;function t(){n.year.value=s()-1}function e(){n.year.value=s()+1}}i.appendChild(t.$all),o._titleElement=t.title,o._bodyElement=t.body,o._animContElement=t.animcont,o._daynamesElement=t.daynames,o._gotoDate(o._date),PH.dragging({focus:o,element:t.left,start:r,timers:[{timeout:500,handler:r,count:0},{timeout:100,handler:r,count:10},{timeout:30,handler:r}]}),PH.dragging({focus:o,element:t.right,start:e,timers:[{timeout:500,handler:e,count:0},{timeout:100,handler:e,count:10},{timeout:30,handler:e}]}),o.on({keydown:function(t){switch(t.keyCode){case 37:t.ctrlKey?o._move(0,-1,0,!0):o._move(0,0,-1,!0),PH.stopEvent(t);break;case 38:t.ctrlKey?o._move(-1,0,0,!0):o._move(0,0,-7,!0),PH.stopEvent(t);break;case 39:t.ctrlKey?o._move(0,1,0,!0):o._move(0,0,1,!0),PH.stopEvent(t);break;case 40:t.ctrlKey?o._move(1,0,0,!0):o._move(0,0,7,!0),PH.stopEvent(t);break;case 13:o.select(o._date),PH.stopEvent(t);break;case 36:o._gotoDate(new Date,!0),PH.stopEvent(t);break;case 35:null!=o._value&&o._gotoDate(o._value,!0),PH.stopEvent(t)}}}),PH.dragging({focus:o,container:o._bodyElement,element:".ph-day",start:function(t,e){o.select(+PH.getData(e,"phDate"))}}),this._showMenu&&(o.addClass("ph-has-menu"),o._closeMenu=a,PH.on(o._titleElement,{click:function(){var t=l();t.year.value=o._getDate().year,t.body.style.display="block",t.body.style.transform="scale(0)",t.body.style.opacity="0",setTimeout(function(){t.body.style.transform="scale(1)",t.body.style.opacity="1"},10)}}))},t._closeMenu=PH.noop,t._getDate=function(){return f(this._date)},t.setDisabledDatesHandler=function(t){this.__disableDates=t,this._render()},t.select=function(t){var e=h(t);t=f(e),this._disableDates(t,e)||(this._value=e,this._gotoDate(e),this.trigger("select",t,e))},t._render=function(){var t=f(this._date),e=function(t){for(var e="",n=0;n<7;++n){var o=(t+n)%7;e+="<div class='ph-day"+(o%6?"":" ph-weekend")+"'>"+PH.t.calDay(o,0)+"</div>"}return e}(this._fdow),n=l(t,this),t=s(t);this._daynamesElement.innerHTML=e,this._bodyElement.innerHTML=n,this._titleElement.innerHTML=t},t._gotoMonth=function(t,e){var n=f(this._date);n.month=t,this._gotoDate(r(n),e)},t._gotoYear=function(t,e){var n=f(this._date);n.year=t,this._gotoDate(r(n),e)},t._gotoDate=function(t,e){null!=t&&!this._withinLimits(t)||(e?this._animDate(t):(this._date=h(t),this._render()))},t._animDate=function(t){var e=this,n=e._date,o=f(n);if(e._date=h(t),t=f(e._date),o.month==t.month&&o.year==t.year)return e._render();var i=n<e._date?"ph-anim-rtl":"ph-anim-ltr",r=e._bodyElement,a=r.cloneNode(!1);PH.setTransition(r,"0.3s"),PH.setTransition(a,"0.3s"),a.innerHTML=l(t,e),PH.removeClass(a,"ph-body"),PH.addClass(a,"ph-anim "+i),e._titleElement.innerHTML=s(t),e._animContElement.appendChild(a),setTimeout(function(){PH.addClass(r,i),PH.removeClass(a,i),setTimeout(function(){PH.remove(a),PH.setTransition(r,"none"),PH.removeClass(r,i),e._render()},300)})},t._move=function(t,e,n,o){var i=f(this._date);i.year+=t,i.month+=e,n?i.date+=n:i=r(i),this._gotoDate(d(i),o)},t._disableDates=function(t,e){return null!=this._minDate&&e<this._minDate||(null!=this._maxDate&&e>this._maxDate||(this.__disableDates?this.__disableDates(t,e):void 0))},t._withinLimits=function(t){if(null!=this._minDate||null!=this._maxDate){if(t=f(h(t)),null!=this._minDate&&(t.date=o(t.year,t.month),p(t)<this._minDate))return!1;if(null!=this._maxDate&&(t.date=1,p(t)>this._maxDate))return!1}return!0};var n=[31,28,31,30,31,30,31,31,30,31,30,31];function o(t,e){return 1!=e?n[e]:28+(t%4||!(t%100)&&t%400?0:1)}function p(t){var e=t.year,n=t.month+1;return(1461*(e+4800+((n-14)/12|0))/4|0)+(367*(n-2-12*((n-14)/12|0))/12|0)-(3*((e+4900+((n-14)/12|0))/100|0)/4|0)+t.date-32075}function f(t){var e=t+68569,n=4*e/146097|0,o=4e3*(1+(e=e-((146097*n+3)/4|0)))/1461001|0,i=80*(e=e-(1461*o/4|0)+31)/2447|0,r=e-(2447*i/80|0);return{year:100*(n-49)+o+(e=i/11|0),month:2+i-12*e-1,date:r,day:(t+1)%7}}u.dateToJulian=p,u.julianToDate=f,u.makeJulian=h}),PH.DatePicker=PH.defclass("DatePicker",PH.Widget,function(i,t){function e(t,e){for(e+="";e.length<t;)e="0"+e;return e}i.options=PH.merge({},PH.Calendar.options,{_showMenu:["showMenu",!1],_emptyLabel:["emptyLabel","Select date..."],_labelFunc:["labelFunc",null,{type:"function"}]}),t._initElement=function(){var n=this,t=(i.base._initElement.call(n),new PH.Calendar({className:"ph-datepicker-calendar",focusable:0,value:n._value,date:n._date,fdow:n._fdow,min:n._minDate,max:n._maxDate,showMenu:n._showMenu,highlightDates:n._highlightDates,disableDates:n.__disableDates})),e=PH.node("<button type='button' class='ph-datepicker-trigger'></button>"),o=(n._button=e,n._from.parentNode.insertBefore(e,n._from),n._from.style.display="none",null==n._value&&/\S/.test(n._from.value)&&(n._value=n._from.value),null!=n._value&&(n._value=PH.Calendar.makeJulian(n._value)),new PH.Dropdown({className:"ph-datepicker-dropdown",trigger:n._button,openOn:["touchstart","mousedown"],align:"S N",content:t.element()}));n._updateLabel(),n.on({destroy:function(){t.destroy(),o.destroy()}}),o.on({show:function(){t.focus(),null!=n._value&&t.withoutHooks("select",function(){t.select(n._value)})},hide:function(){n._button.focus(),t._closeMenu()}}),t.on({select:function(t,e){n.select(e),o.close()},keydown:function(t){27==t.keyCode&&(PH.stopEvent(t),o.close())}})},t._makeLabel=function(){var t;return this._labelFunc&&(null!=(t=this._value)&&(t=PH.Calendar.julianToDate(t)),t=this._labelFunc(t,this)),t=null==t?null==this._value?this._emptyLabel:this._textValue():t},t._textValue=function(){var t;return null!=this._value?(t=PH.Calendar.julianToDate(this._value)).year+"-"+e(2,t.month+1)+"-"+e(2,t.date):""},t._updateLabel=function(){this._button.innerText=this._makeLabel(),this._from&&(this._from.value=this._textValue())},t.select=function(t){this._value=t=PH.Calendar.makeJulian(t);var e=PH.Calendar.julianToDate(t);this._updateLabel(),this.trigger("select",e,t),this._from&&PH.trigger(this._from,"change")}}),PH.Slider=PH.defclass("Slider",PH.Widget,function(e,t){"use strict";e.args={focusable:!0},e.options={_min:["min",0],_max:["max",100],_low:["low",null],_high:["high",null],_minGap:["minGap",0],_allowRange:["allowRange",!0],_roundStep:["round",null]},t._initElement=function(){var t=this;e.base._initElement.call(t),t._min=t._round(t._min,"low"),t._max=t._round(t._max,"high"),t._allowRange&&(null==t._low&&(t._low=t._min),null==t._high&&(t._high=t._max)),t._low=t._round(Math.max(t._min,t._low),"low"),t._high=t._round(Math.min(t._max,t._high),"high"),t._leftKnob=document.createElement("a"),PH.addClass(t._leftKnob,"knob left"),t.element().appendChild(t._leftKnob),t._setupKnob(t._leftKnob,"low"),t._allowRange&&(t._rangeBar=document.createElement("div"),PH.addClass(t._rangeBar,"range-bar"),t.element().appendChild(t._rangeBar),t._rightKnob=document.createElement("a"),PH.addClass(t._rightKnob,"knob right"),t._setRightPos(),t.element().appendChild(t._rightKnob),t._setupKnob(t._rightKnob,"high")),t._setLeftPos()},t._setLeftPos=function(t){var e=this._low,n=(null==t&&(t=this._low),this._low=t);t=this._percent(t),this._leftKnob.style.left=t+"%",this._rangeBar&&(this._rangeBar.style.left=t+"%"),t!=e&&this.trigger("move","low",n,e)},t._setRightPos=function(t){var e=this._high,n=(null==t&&(t=this._high),this._high=t);t=this._percent(t),this._rightKnob.style.left=t+"%",this._rangeBar.style.right=100-t+"%",t!=e&&this.trigger("move","high",n,e)},t._setKnobPos=function(t,e){return"low"==t?this._setLeftPos(e):this._setRightPos(e)},t._setupKnob=function(e,n){var o,i,r,a=this,s=PH.dragging({block:!0,element:e,start:function(t){a.focus(),PH.removeClass([a._leftKnob,a._rightKnob],"upper"),PH.addClass(e,"upper"),o=e.offsetLeft,i=a.element().offsetWidth,r=a.getValue(),a.trigger("start",r)},stop:function(){a._maybeTriggerChange(r)},move:function(t){t=(t=(o+t.dx)/i)<0?0:1<t?1:t,t=a._min+t*(a._max-a._min);a._allowRange&&("low"==n&&t>=a._high-a._minGap?t=a._high-a._minGap:"high"==n&&t<=a._low+a._minGap&&(t=a._low+a._minGap)),a._setKnobPos(n,a._round(t))},esc:function(t){PH.stopEvent(t),a.setValue(r),s()}})},t._maybeTriggerChange=function(t){var e=this.getValue(),n=!1;this._allowRange?e[0]==t[0]&&e[1]==t[1]||(n=!0):e!=t&&(n=!0),n&&this.trigger("change",e,t)},t.setValue=function(t,e){var n=this._allowRange&&PH.isArray(t);n&&(e=t[1],t=t[0]),this._setKnobPos("low",Math.max(this._min,t)),n&&this._setKnobPos("high",Math.min(this._max,Math.max(this._low,e)))},t.getValue=function(){return this._allowRange?[this._low,this._high]:this._low},t._percent=function(t){return 100*(t-this._min)/(this._max-this._min)},t._round=function(t,e){var n=this._roundStep;return t=n?n*("low"==e?Math.floor(t/n):"high"==e?Math.ceil(t/n):Math.round(t/n)):t}}),PH.DragSort=PH.defclass("DragSort",PH.Widget,function(P,t){"use strict";P.options={_selHandle:["handleSelector",".ph-handle"],_selCard:["cardSelector",".ph-card"],_horizontal:["horizontal",!1],_autoscroll:["autoscroll",!1],_selNotBefore:["notBeforeSelector",null],_selNotAfter:["notAfterSelector",null],_dragCursor:["dragCursor","move"]},t._initElement=function(){var n,o,i,r,s,l,a,u,c,h,d,p,f,_,m,g=this,t=(P.base._initElement.call(g),g.element().style.overflowAnchor="none",PH.condClass(g.element(),g._horizontal,"ph-horizontal","ph-vertical"),PH.dragging({container:g.element(),element:g._selCard,handle:g._selHandle,overlay:!1,block:!0,start:function(t,e){PH.matches(e,g._selNotBefore)||PH.matches(e,g._selNotAfter)?v():(m=!1,r=e,s=[],PH.slice(g.element().querySelectorAll(g._selCard)).forEach(function(t,e){t===r?a=u=e:s.push({el:t,box:PH.getAbsBox(t),index:e})}),c=t.clientX,h=t.clientY,l=r.getBoundingClientRect(),o=l.left-c,i=l.top-h,p=PH.getAbsBox(g.element()),_=!1,PH.closest(t.target,"a, button")||b())},move:function(t){!_&&20<t.dx*t.dx+t.dy*t.dy&&b(),_&&(g._horizontal?((t.clientY>h||t.clientX>c)&&(d=!0),(t.clientY<h||t.clientX<c)&&(d=!1)):(t.clientY>h&&(d=!0),t.clientY<h&&(d=!1)),c=t.clientX,h=t.clientY,e(t.pageX,t.pageY))},stop:function(){_&&w(),y(),m||g.trigger("done",u)},esc:function(){var t;_&&(t=(t=s[u])&&t.el,g.element().insertBefore(r,t),w()),y(),v(),g.trigger("cancel",u)}}));function v(){m=!0,t()}function b(){_=!0,PH.overlay.on().cursor(g._dragCursor),n=r.cloneNode(!0),PH.addClass(n,"ph-dragging-shadow"),PH.removeClass(n,"ph-dragging"),PH.on(n,"mousedown",PH.stopEvent,!0);var t=r.getBoundingClientRect();PH.merge(n.style,{position:"fixed",width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px",boxSizing:"border-box",transition:"none"}),document.body.appendChild(n),g._autoscroll&&!g._horizontal&&(f=PH.cancellable(function(){var t=PH.getViewport();d&&t.height-h<70&&p.bottom>t.bottom?window.scrollTo(t.left,t.top+10):!d&&h<70&&p.top<t.top?window.scrollTo(t.left,t.top-10):f.cancel(),e(c+window.pageXOffset,h+window.pageYOffset)},16,!0))}function e(t,e){g._horizontal&&(n.style.left=c+o+"px"),n.style.top=h+i+"px";t=function(t,e){for(var n,o,i={left:t,top:e,right:t+l.width,bottom:e+l.height},r=0;r<s.length;++r){var a=s[r];0<function(t,e){var n=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),t=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return n*t}(i,a.box)&&(n=a,o=r)}if(n){if(t+=l.width/2,e+=l.height/2,t=d?g._horizontal?t>n.box.left:e>n.box.top:g._horizontal?t>n.box.right:e>n.box.bottom,g._selNotBefore)if(t){if(PH.matches(n.el.nextElementSibling,g._selNotBefore))return}else if(PH.matches(n.el,g._selNotBefore))return;if(g._selNotAfter)if(t){if(PH.matches(n.el,g._selNotAfter))return}else if(PH.matches(n.el.previousElementSibling,g._selNotAfter))return;return{el:n.el,after:t,index:o+t}}}(t+o,e+i);if(null!=t&&t.index!=a){e=t;a=e.index,e.after?g.element().insertBefore(r,e.el.nextElementSibling):g.element().insertBefore(r,e.el),s.forEach(function(t){t.box=PH.getAbsBox(t.el)}),g.trigger("moving",r,e)}f&&f()}function y(){f&&f.cancel(),l=p=f=n=r=s=null}function w(){var t,e;r&&(t=r.getBoundingClientRect(),PH.setTransition(n,"0.2s"),PH.merge(n.style,{transition:"0.2s",left:t.left+"px",top:t.top+"px",opacity:"0.2"}),setTimeout(PH.remove.bind(PH,n),200),!g._horizontal&&g._autoscroll&&(e=PH.getViewport(),t.bottom>e.height?PH.scrollTo(e.top+t.bottom-e.height):t.top<0&&PH.scrollTo(e.top+t.top)))}}});